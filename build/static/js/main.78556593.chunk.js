(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,a){e.exports=a(184)},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},127:function(e,t,a){},184:function(e,t,a){"use strict";a.r(t);var n=a(97),r=a(29),c=a(30),s=a(54),o=a(53),l=a(0),i=a.n(l),u=a(17),d=a.n(u),h=a(186),g=a(187),m=(a(105),a(24)),p=a.n(m),v=a(39),f=function(){function e(){Object(r.a)(this,e),this._apiBase="https://api.themoviedb.org/3/search/movie?api_key=8c6dbd7d4f04d89380a2407e93d496b2&language=en-US&query="}return Object(c.a)(e,[{key:"getResurse",value:function(){var e=Object(v.a)(p.a.mark((function e(t){var a,n,r=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:1,e.next=3,fetch("".concat(this._apiBase).concat(t,"&page=").concat(a,"&per_page=5&include_adult=false"));case 3:if((n=e.sent).ok){e.next=6;break}throw Error("recoved ".concat(n.status));case 6:return e.abrupt("return",n.json());case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPeople",value:function(){var e=Object(v.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getResurse(t,a));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getOnePage",value:function(){var e=Object(v.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResurse(t);case 2:return a=e.sent,e.abrupt("return",a.results);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllGeneres",value:function(){var e=Object(v.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=8c6dbd7d4f04d89380a2407e93d496b2&language=en-US");case 2:if((t=e.sent).ok){e.next=5;break}throw Error("recoved ".concat(t.status));case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),b=(a(107),a(108),a(76)),_=a.n(b);function k(e){var t=e.getSerchValue,a=e.onClickReted,n=e.selectedRetedFlag,r="",c=Object(l.useCallback)(_()((function(e){return t(e)}),600),[]);function s(){a(!0)}function o(){a(!1)}var u="".concat(n?"":"selected"," serch__textSerch "),d="".concat(n?"selected":""," serch__textRated ");return i.a.createElement("div",{className:"serch"},i.a.createElement("div",{className:"serch__text"},i.a.createElement("button",{type:"button",className:u,onClick:o,onKeyDown:o},"Search"),i.a.createElement("button",{type:"button",className:d,onClick:s,onKeyDown:s},"Reted")),i.a.createElement("input",{onChange:function(e){e.target.value&&(r=e.target.value,c(r))},type:"text",className:"serch__input",placeholder:"Type to search..."}))}var y=a(98),E=a(62),w=a(77),S=(a(109),a(188)),R=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={loading:!1},e.selected=!1,e.image="https://image.tmdb.org/t/p/w600_and_h900_bestv2",e.image1="https://www.themoviedb.org/assets/2/v4/glyphicons/basic/glyphicons-basic-38-picture-4ee37443c461fff5bc221b43ae018a5dae317469c8e2479a87d562537dd45fdc.svg",e.show=function(t){var a=e.props.genres;return t.map((function(e){var t,n=Object(w.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e)return r.name}}catch(c){n.e(c)}finally{n.f()}}))},e.click=function(t){e.selected||(e.selected=!0,(0,e.props.onClickReted)(Object(E.a)(Object(E.a)({},e.props),{},{value:t})))},e.loadImg=function(){e.setState({loading:!0})},e.color=function(e){return e<=3?"red":e<=5?"darkorange":e<=7?"gold":"lawngreen"},e.truncate=function(e){var t=e.match(/^.{0,180}[\S]*/),a=t[0].length;return t=t[0].replace(/\s$/,""),a<e.length&&(t+="..."),t},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.loading,t=this.props,a=t.poster_path,n=t.original_title,r=t.overview,c=t.vote_average,s=t.release_date,o=t.genre_ids,l=this.show(o),u=this.truncate(r),d=i.a.createElement("div",{className:e?"movies__imgLoadingNone":"movies__imgLoading"},"Loading..."),h=l.map((function(e,t){return i.a.createElement("li",{key:t},e)}));return i.a.createElement("div",{className:"movies__body"},i.a.createElement("div",{className:"movies__imgBody"},d,i.a.createElement("img",{className:"movies__img",src:a?this.image+a:this.image1,alt:"",onLoad:this.loadImg})),i.a.createElement("div",{className:"movies__items"},i.a.createElement("div",{className:"movies__header"},i.a.createElement("h3",{className:"movies__title"},n),i.a.createElement("div",{className:"movies__rating ".concat(this.color(c))},c)),i.a.createElement("span",{className:"movies__date"},s),i.a.createElement("ul",{className:"movies__genre"},0===h.length?i.a.createElement("li",null,"is unknown"):h),i.a.createElement("span",{className:"movies__text"},u),i.a.createElement("div",{className:"wraperRate"},i.a.createElement(S.a,{allowHalf:!0,defaultValue:c,count:10,onChange:this.click}))))}}]),a}(l.Component);function O(e){var t=e.resultSerch,a=e.onClickReted,n=e.genres,r=t.map((function(e){var t=e.id,r=Object(y.a)(e,["id"]);return i.a.createElement("div",{key:t},i.a.createElement(R,Object.assign({},r,{onClickReted:a,genres:n})))}));return i.a.createElement("div",{className:"movies"},r)}R.defaultProps={poster_path:"https://www.themoviedb.org/assets/2/v4/glyphicons/basic/glyphicons-basic-38-picture-4ee37443c461fff5bc221b43ae018a5dae317469c8e2479a87d562537dd45fdc.svg"};a(127);function j(){return i.a.createElement("div",{className:"error"},"no internet, check connection")}a.d(t,"default",(function(){return C}));var N=new f,C=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var c=arguments.length,s=new Array(c),o=0;o<c;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).flagOneDownloadPage=!1,e.page=1,e.genres=[],e.state={resultSerch:[],totalResults:0,loading:!0,error404:!1,valueSerch:"",selectedRetedFlag:!1,reted:[]},e.pageClick=function(t){var a=e.state.valueSerch;e.setState({loading:!0}),e.getSerchValue(a,t)},e.getSerchValue=function(t,a){var n=e.state.valueSerch;e.page=a,t!==n&&(e.page=1),e.setState({loading:!0}),N.getAllPeople(t,a).then((function(a){e.setState({resultSerch:a.results,totalResults:a.total_results,loading:!1,error404:!1,valueSerch:t})})).catch((function(){e.setState({error404:!0,loading:!1})}))},e.onClickRetedFlag=function(t){e.setState({selectedRetedFlag:t})},e.onClickReted=function(t){e.setState((function(e){var a=e.reted;return{reted:a?[].concat(Object(n.a)(a),[t]):[t]}}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.getAllGeneres().then((function(t){e.genres=t.genres})),N.getAllPeople("The way back").then((function(t){e.setState({resultSerch:t.results,totalResults:t.total_results,loading:!1,error404:!1})})).catch((function(){e.setState({error404:!0,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.resultSerch,a=e.totalResults,n=e.loading,r=e.error404,c=e.selectedRetedFlag,s=e.reted,o=i.a.createElement("div",{className:"example"},i.a.createElement(h.a,null)),l=i.a.createElement(O,{resultSerch:c?s:t,onClickReted:this.onClickReted,genres:this.genres});return i.a.createElement("div",null,i.a.createElement(k,{getSerchValue:this.getSerchValue,onClickReted:this.onClickRetedFlag,selectedRetedFlag:c}),r?i.a.createElement(j,null):n?o:l,i.a.createElement("div",{className:"pageBody"},i.a.createElement(g.a,{current:this.page,showSizeChanger:!1,onChange:this.pageClick,total:c?1:a,defaultPageSize:20,pageSizeOptions:[20],disabled:a<=20})))}}]),a}(l.Component);d.a.render(i.a.createElement(C,null),document.getElementById("root"))}},[[100,1,2]]]);
//# sourceMappingURL=main.78556593.chunk.js.map